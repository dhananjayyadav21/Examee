<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Examee</title>
  <link rel="icon" href="img/brandlog.png">
  <link rel="stylesheet" href="css/register.css">
  <link rel="stylesheet" href="css/nav.css">
  <script src="js/login.js"></script>
</head>

<body>

  <!--nav bar-->
  <nav>
    <div class="leftnav">
      <a href="/">
        <li><img class="brand-logo-group" src="img/brandlog.png" class="logo" width="110px" height="30px"></li>
      </a>
    </div>

    <div class="menunav"> <a href="#">
        <li onclick=showSidebar()><img src="img/icons8-menu-24.png"></li>
      </a>
    </div>

    <!-- sidebaar -->
    <div class="sidebar">
      <a href="#">
        <li onclick=closeSidebar()><img src="img/icons8-cross-30.png"></li>
      </a>
      <a href="#">
        <li><img class="sidebaar-tital-img" src="img/category.png" width="25px" height="25px"><select
            class="select-option-group" name="degree" id="">
            <option value="0" hidden>Category</option>
            <option value="BSC-IT">BSC-IT</option>
            <option value="MSC-IT">MSC-IT</option>
            <option value="B.COM">B.COM</option>
            <option value="12TH-SCIENCE">12TH-SCIENCE</option>
            <option value="12TH-COMMERCE">12TH-COMMERCE</option>
          </select></li>
      </a>
      <a href="/notes.html">
        <li><img class="sidebaar-tital-img" src="img/icons8-notes-50.png" width="15px" height="15px">Notes</li>
      </a>
      <a href="/practical.html">
        <li><img class="sidebaar-tital-img" src="img/icons8-computer-30.png" width="15px" height="15px">Practical </li>
      </a>
      <a href="/Qution-Paper.html">
        <li><img class="sidebaar-tital-img" src="img/corrective_11907117.png" width="15px" height="15px">Qution-Paper
        </li>
      </a>
      <a href="/cource.html">
        <li><img class="sidebaar-tital-img" src="img/icons8-course-80.png" width="15px" height="15px">Cources </li>
      </a>
      <a href="/video.html">
        <li><img class="sidebaar-tital-img" src="img/icons8-video-50.png" width="15px" height="15px">Video</li>
      </a>
    </div>

  </nav>


  <!--register form-->
  <form action="" id="form">
    <div class="container">
      <div class="loginpage">

        <h2 class="page-heading">Create Your Account</h2>
        <div class="username form-input-group input-group-inline">
          <label class="input-label">First Name</label><br>
          <input class="form-input" type="text" placeholder="Your First Name" id="fname" required>
        </div>

        <div class="Password form-input-group input-group-inline">
          <label class="input-label">Last Name</label><br>
          <input class="form-input" type="text" placeholder="Your Last Name" id="lname" required>
        </div>

        <div class="Password form-input-group  input-group-inline ">
          <label class="input-label">E-mail Address</label><br>
          <input class="form-input" type="email" placeholder="Enter E-mail Address" id="email" required>
        </div>

        <div class="username form-input-group input-group-inline ">
          <label class="input-label">Password</label><br>
          <input class="form-input" type="password" placeholder="Password" id="password" required>
        </div>

        <div class="username form-input-group input-group-inline ">
          <label class="input-label">Confirm Password</label><br>
          <input class="form-input" type="text" placeholder="Confirm Password" id="confirmpassword" required>
        </div>

        <div class="remember-forget form-input-group">
          <div class="d-flex">
            <input id="check" type="checkbox" required><label for="check" class="checkbox-form-group">I Recive all
              important
              e-mails</label>
          </div>

        </div>

        <div class="sumbit form-input-group">
          <button class="btn" type="submit">Register</button>
        </div>

        <div class="form-register-group">
          <p>Already have an account? </p>
          <a class="form-register-second-group" href="/login.html">Sign In</a>
        </div>
      </div>
    </div>
  </form>

  <script>
    function showSidebar() {
      const sidebar = document.querySelector('.sidebar')
      sidebar.style.display = 'flex'
    }

    function closeSidebar() {
      const sidebar = document.querySelector('.sidebar')
      sidebar.style.display = 'none'
    }


    //login form js---------------------------------------------
    let form = document.getElementById('form');

    form.addEventListener("submit", async (e) => {
      e.preventDefault()
      let fname = document.getElementById("fname").value;
      let lname = document.getElementById("lname").value;
      let email = document.getElementById("email").value;
      let password = document.getElementById("password").value;
      let confirmpassword = document.getElementById("confirmpassword").value;


      let userrecord = [];
      let exestinguser = localStorage.getItem("users")
      exestinguser = JSON.parse(exestinguser)

      if (exestinguser != null) {
        userrecord = exestinguser
      }

      if (password != confirmpassword) {
        alert("Password and confirm password shoulde be match.");
        return
      }

      let user = {
        fname: fname,
        lname: lname,
        email: email,
        password: password,
      }

      userrecord.push(user);

      let string = JSON.stringify(userrecord);
      localStorage.setItem("users", string)
      await registerUser(fname, lname, email, password);
      // alert("Register Succesfully");
      // window.location.replace("/login.html")
    })

    async function registerUser(fname, lname, email, password) {
      let url = 'https://script.google.com/macros/s/AKfycbybtynNQqtfRysRiyKEo02bHRNqR_WQOuK0gZNWwA129d2eaNcXGy77qIPgvkcY7jYS4w/exec';
      const params = new URLSearchParams({
        action: 'addUser',
        fname: fname,
        lname: lname,
        email: email,
        password: password
      });
      url = url + '?' + params.toString();
      try {
        const response = await fetch(url, {
          method: 'GET' // If you prefer POST, you can use the previous example with POST method
        });
        const result = await response.json();
        console.log('Add User Response:', result);
        if (result.code == 201) {
          alert("Register Succesfully");
          window.location.replace("/login.html")
        } else {
          alert(result.error);
        }
      } catch (error) {
        console.error('Error:', error);
      }
    }


  </script>
  <script src="js/script.js"></script>

</body>

</html>